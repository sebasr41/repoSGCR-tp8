<!DOCTYPE html>
<html lang="es" xmlns:th="https://www.thymeleaf.org/">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link th:rel="stylesheet" th:href="@{https://use.fontawesome.com/releases/v5.15.3/css/all.css}" integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
    <link th:rel="stylesheet" th:href="@{css/styles.css}">
    <link th:rel="stylesheet" th:href="@{webjars/bootstrap/4.6.0/css/bootstrap.min.css}">
    <link rel="shortcut icon" href="img/favicon.png"/>
    <title>Compras</title>
</head>
<body>

	<div class="container">
		<!-- Header -->
  		<div th:replace="layouts/header :: header" ></div>
  		<div class="row my-3">
  		<div class="col-12 col-sm-12 col-md-8 mb-3">
  			<h2 class="h2 pb-3">Compra</h2>
  			
            <form th:action="@{/compra-guardar}" method="POST" th:object="${compra}" th:if="${bandera}">            	
            	<input type="hidden" th:field="*{id}" />                       	            
            	<input type="hidden" th:field="*{producto.id}" >          	   
          
        		<div class="form-group">
	                <label for="producto">Nombre del Producto</label>
	                <select id="producto" th:field="*{producto.stock}" class="form-control form-control-sm">
	                <option th:each="prod : ${productos}"
	                 th:value="${prod.id}"
	                 th:text="${prod.nombre}"	                
	                 th:selected="false"/>
	                </select>
	                <!-- Muestra mensajes de error de validación -->
	                <div class="form-text alert-danger col-md-12 rounded-bottom" th:if="${#fields.hasErrors('producto.id')}" th:errors="*{producto.id}"></div>
        		</div>                              
                
        		<div class="form-group">
	                <label for="cantidad">Cantidad</label>
	                <input class="form-control" type="number" id="cantidad" th:field="*{cantidad}">
	                 <!-- Muestra mensajes de error de validación -->
	                <div class="form-text alert-danger col-md-12 rounded-bottom" th:if="${#fields.hasErrors('cantidad')}" th:errors="*{cantidad}"></div>
        		</div>        		        		                      
        		        		                                                         	
                <input class="btn btn-primary" type="submit" value="Guardar">
            </form>
  		</div>
  		
  		<div class="col-12 col-sm-12 col-md-8 mb-3" th:unless="${bandera}">
		   	<h3 class="h3">Primero debe registrar un producto <i class="fas fa-exclamation-triangle text-danger mx-2"></i></h3>
		   	<a class="btn btn-primary my-2" role="button" href="/producto">Ir al formulario de producto </a>	
		</div>
  		
  			<!-- Publcity -->
   	 		<div th:replace="layouts/aside :: aside" ></div>
  		</div>
            
            <!-- Footer -->
  			<div th:replace="layouts/footer :: footer" ></div>
	</div>	
            
        
    
	<script th:src="@{webjars/jquery/3.5.1/jquery.min.js}"></script>
    <script th:src="@{webjars/popper.js/1.16.1-lts/popper.min.js}"></script>
    <script th:src="@{webjars/bootstrap/4.6.0/js/bootstrap.min.js}"></script>
</body>
</html>